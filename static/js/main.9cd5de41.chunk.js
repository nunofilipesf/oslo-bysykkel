(this["webpackJsonposlo-bysykkel"]=this["webpackJsonposlo-bysykkel"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),o=n(7),r=n.n(o),i=(n(17),function(){return s.a.createElement("div",{className:"topbar"},"Oslo City Bikes")}),l=n(3),c=(n(18),function(){return s.a.createElement("div",{className:"loader"})}),u=n(2),m=n(8),p=n(9),f=n(11),d=n(10),b=n(1),k=n.n(b),v=(n(19),"all"),y="bikes",h="docks",E=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).state={lng:10.74609,lat:59.91273,zoom:13,visualizationType:y},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=new b.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[this.state.lng,this.state.lat],zoom:this.state.zoom});e.on("load",function(e,t){return function(){var n,a={type:"FeatureCollection",features:t.map(g)},s=Object(u.a)(a.features);try{for(s.s();!(n=s.n()).done;){var o=n.value,r=document.createElement("div");r.className="marker",0===o.properties.bikes&&r.classList.add("marker-no-bikes"),0===o.properties.docks&&r.classList.add("marker-no-docks"),new b.Marker(r).setLngLat(o.geometry.coordinates).setPopup(new b.Popup({offset:5}).setHTML(j(o.properties))).addTo(e)}}catch(i){s.e(i)}finally{s.f()}}}(e,this.props.markers))}},{key:"onChangeVisualizationType",value:function(e){var t=this;return function(){return t.setState({visualizationType:e})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"map map-".concat(this.state.visualizationType)},s.a.createElement("div",{className:"map-container",ref:function(t){return e.mapContainer=t}}),s.a.createElement("div",{className:"map-controls"},s.a.createElement("button",{className:this.state.visualizationType===v?"selected":"",onClick:this.onChangeVisualizationType(v)},"All"),s.a.createElement("button",{className:this.state.visualizationType===y?"selected":"",onClick:this.onChangeVisualizationType(y)},"Bikes"),s.a.createElement("button",{className:this.state.visualizationType===h?"selected":"",onClick:this.onChangeVisualizationType(h)},"Docks")))}}]),n}(s.a.Component);function g(e){return{type:"Feature",properties:{name:e.name,address:e.address,bikes:e.num_bikes_available,docks:e.num_docks_available},geometry:{type:"Point",coordinates:[e.lon,e.lat]}}}function j(e){var t=e.name,n=e.bikes,a=e.docks;return'\n        <h3 class="title">'.concat(t,'</h3>\n        <p class="info-entry">\ud83d\udeb2 ').concat(n,' available bikes</p>\n        <p class="info-entry">\ud83c\udd7f\ufe0f ').concat(a," available docks</p>\n    ")}var O=n(5);function z(){return Promise.all([N("https://gbfs.urbansharing.com/oslobysykkel.no/station_information.json"),N("https://gbfs.urbansharing.com/oslobysykkel.no/station_status.json")]).then((function(e){var t=Object(l.a)(e,2);return function(e,t){var n,a=e.stations,s=t.stations,o=[],r=Object(u.a)(a);try{for(r.s();!(n=r.n()).done;){var i=n.value,l=s.find(C(i.station_id))||{};o.push(Object(O.a)(Object(O.a)({},i),l))}}catch(c){r.e(c)}finally{r.f()}return o}(t[0],t[1])}))}function N(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e.data}))}function C(e){return function(t){return t.station_id===e}}var T=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){null==n&&z().then(o)})),null==n?s.a.createElement(c,null):s.a.createElement(E,{markers:n})},_=(n(20),function(){return s.a.createElement("div",{className:"footer"},s.a.createElement("div",{className:"footer-content"},s.a.createElement("p",null,"Data retrieved from ",s.a.createElement("a",{href:"https://oslobysykkel.no/",target:"_blank",rel:"noopener noreferrer"},"Oslo Bysykkel"))))});n(21);var w=function(){return s.a.createElement("div",{className:"app"},s.a.createElement(i,null),s.a.createElement("div",{className:"app-content"},s.a.createElement(T,null)),s.a.createElement(_,null))};k.a.accessToken="pk.eyJ1IjoibnVub2ZpbGlwZXNmIiwiYSI6ImNrZmgxeHhlbzAwbHUzOHMydm1nc2prajQifQ.ACx92OxlVSlqpgW6s4-_XA",r.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(w,null)),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.9cd5de41.chunk.js.map