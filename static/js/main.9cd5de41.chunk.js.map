{"version":3,"sources":["components/Topbar/index.jsx","components/Loader/index.jsx","components/Map/index.jsx","services/stations.js","pages/StationLocator/index.jsx","components/Footer/index.jsx","App.jsx","index.jsx"],"names":["className","VISUALIZATION_TYPES","props","state","lng","lat","zoom","visualizationType","map","Map","container","this","mapContainer","style","center","on","markers","geojsonData","type","features","stationMarkerToGeoJsonPointMapper","marker","el","document","createElement","properties","bikes","classList","add","docks","Marker","setLngLat","geometry","coordinates","setPopup","Popup","offset","setHTML","getPopupHtml","addTo","onMapLoad","setState","ref","onClick","onChangeVisualizationType","React","Component","name","address","num_bikes_available","num_docks_available","lon","getStations","Promise","all","executeRequest","then","info","status","infoData","stations","statusData","mergedData","station","stationStatus","find","stationFilter","station_id","push","mergeData","url","fetch","response","json","data","stationId","useState","setStations","useEffect","Loader","href","target","rel","App","Topbar","StationLocator","Footer","MapBoxGl","accessToken","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9cd5de41.chunk.js","sourcesContent":["import React from 'react';\r\nimport './style.css';\r\n\r\nexport default function () {\r\n    return <div className=\"topbar\">\r\n        Oslo City Bikes\r\n    </div>\r\n}","import React from 'react';\r\nimport './style.css';\r\n\r\nexport default function () {\r\n    return <div className=\"loader\"></div>;\r\n}","import React from 'react';\r\nimport { Map, Popup, Marker } from 'mapbox-gl';\r\nimport './style.css';\r\n\r\nconst VISUALIZATION_TYPES = {\r\n    ALL: 'all',\r\n    BIKES: 'bikes',\r\n    DOCKS: 'docks'\r\n}\r\n\r\nexport default class extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            // Oslo coordinates\r\n            lng: 10.74609,\r\n            lat: 59.91273,\r\n            zoom: 13,\r\n            visualizationType: VISUALIZATION_TYPES.BIKES\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        const map = new Map({\r\n            container: this.mapContainer,\r\n            style: 'mapbox://styles/mapbox/streets-v11',\r\n            center: [this.state.lng, this.state.lat],\r\n            zoom: this.state.zoom\r\n        });\r\n\r\n        map.on('load', onMapLoad(map, this.props.markers))\r\n    }\r\n\r\n    onChangeVisualizationType(type) {\r\n        return () => this.setState({ visualizationType: type });\r\n    }\r\n\r\n    render() {\r\n        return <div className={`map map-${this.state.visualizationType}`}>\r\n            <div className=\"map-container\" ref={el => this.mapContainer = el} />\r\n            <div className=\"map-controls\">\r\n                <button\r\n                    className={this.state.visualizationType === VISUALIZATION_TYPES.ALL ? 'selected' : ''}\r\n                    onClick={this.onChangeVisualizationType(VISUALIZATION_TYPES.ALL)}>\r\n                    All\r\n                </button>\r\n\r\n                <button\r\n                    className={this.state.visualizationType === VISUALIZATION_TYPES.BIKES ? 'selected' : ''}\r\n                    onClick={this.onChangeVisualizationType(VISUALIZATION_TYPES.BIKES)}>\r\n                    Bikes\r\n                </button>\r\n\r\n                <button\r\n                    className={this.state.visualizationType === VISUALIZATION_TYPES.DOCKS ? 'selected' : ''}\r\n                    onClick={this.onChangeVisualizationType(VISUALIZATION_TYPES.DOCKS)}>\r\n                    Docks\r\n                </button>\r\n            </div>\r\n        </div>\r\n    }\r\n}\r\n\r\nfunction onMapLoad(map, markers) {\r\n    return function () {\r\n        // From: https://docs.mapbox.com/help/tutorials/custom-markers-gl-js\r\n        const geojsonData = {\r\n            type: 'FeatureCollection',\r\n            features: markers.map(stationMarkerToGeoJsonPointMapper)\r\n        };\r\n\r\n        for (const marker of geojsonData.features) {\r\n            // create a HTML element for each feature\r\n            const el = document.createElement('div');\r\n            el.className = 'marker';\r\n\r\n            if (marker.properties.bikes === 0)\r\n                el.classList.add('marker-no-bikes');\r\n\r\n            if (marker.properties.docks === 0)\r\n                el.classList.add('marker-no-docks');\r\n\r\n            // make a marker for each feature and add to the map\r\n            new Marker(el)\r\n                .setLngLat(marker.geometry.coordinates)\r\n                .setPopup(\r\n                    new Popup({ offset: 5 })\r\n                        .setHTML(getPopupHtml(marker.properties))\r\n                )\r\n                .addTo(map);\r\n        }\r\n    }\r\n}\r\n\r\nfunction stationMarkerToGeoJsonPointMapper(marker) {\r\n    return {\r\n        type: 'Feature',\r\n        properties: {\r\n            name: marker.name,\r\n            address: marker.address,\r\n            bikes: marker.num_bikes_available,\r\n            docks: marker.num_docks_available\r\n        },\r\n        geometry: {\r\n            type: 'Point',\r\n            coordinates: [marker.lon, marker.lat]\r\n        }\r\n    }\r\n}\r\n\r\nfunction getPopupHtml({ name, bikes, docks }) {\r\n    return `\r\n        <h3 class=\"title\">${name}</h3>\r\n        <p class=\"info-entry\">üö≤ ${bikes} available bikes</p>\r\n        <p class=\"info-entry\">üÖøÔ∏è ${docks} available docks</p>\r\n    `;\r\n}","export function getStations() {\r\n    return Promise.all([\r\n            executeRequest('https://gbfs.urbansharing.com/oslobysykkel.no/station_information.json'),\r\n            executeRequest('https://gbfs.urbansharing.com/oslobysykkel.no/station_status.json')\r\n        ])\r\n        .then(([info, status]) => mergeData(info, status));\r\n}\r\n\r\nfunction executeRequest(url) {\r\n    return fetch(url)\r\n        .then(response => response.json())\r\n        .then(response => response.data);\r\n}\r\n\r\nfunction mergeData(info, status) {\r\n    const infoData = info.stations;\r\n    const statusData = status.stations;\r\n\r\n    const mergedData = [];\r\n    for (const station of infoData) {\r\n        const stationStatus = statusData.find(stationFilter(station.station_id)) || {};\r\n\r\n        mergedData.push({\r\n            ...station,\r\n            ...stationStatus\r\n        });\r\n    }\r\n\r\n    return mergedData;\r\n}\r\n\r\nfunction stationFilter(stationId) {\r\n    return (station) => station.station_id === stationId;\r\n}","import React, { useState, useEffect } from 'react';\r\nimport Loader from '../../components/Loader';\r\nimport Map from '../../components/Map';\r\nimport { getStations } from '../../services/stations';\r\n\r\nexport default function () {\r\n    const [stations, setStations] = useState(null);\r\n\r\n    useEffect(() => {\r\n        if (stations == null)\r\n            getStations().then(setStations);\r\n    })\r\n\r\n    return stations == null\r\n        ? <Loader />\r\n        : <Map markers={stations} />\r\n}","import React from 'react';\r\nimport './style.css';\r\n\r\nexport default function () {\r\n    return <div className=\"footer\">\r\n        <div className=\"footer-content\">\r\n            <p>\r\n                Data retrieved from <a href=\"https://oslobysykkel.no/\" target=\"_blank\" rel=\"noopener noreferrer\">Oslo Bysykkel</a>\r\n            </p>\r\n        </div>\r\n    </div>\r\n}","import React from 'react';\nimport Topbar from './components/Topbar';\nimport StationLocator from './pages/StationLocator';\nimport Footer from './components/Footer';\nimport './styles/app.css';\n\nfunction App() {\n    return (\n        <div className=\"app\">\n            <Topbar />\n            <div className=\"app-content\">\n                <StationLocator />\n            </div>\n            <Footer />\n        </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport MapBoxGl from 'mapbox-gl';\n\nMapBoxGl.accessToken = 'pk.eyJ1IjoibnVub2ZpbGlwZXNmIiwiYSI6ImNrZmgxeHhlbzAwbHUzOHMydm1nc2prajQifQ.ACx92OxlVSlqpgW6s4-_XA';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n);"],"sourceRoot":""}